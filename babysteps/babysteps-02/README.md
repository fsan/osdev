# Babysteps - 01
https://wiki.osdev.org/Babystep1

* It required the version which has

```asm
hang:
    jmp hang
	times 510-($-$$) db 0
	db 0x55
	db 0xAA
```
 
checking with `xxd` it is possible to see that these commands add the  `0x55aa` to the end of the binary.


As far as I understood, the `db` directive will inject the bytes in the current position of the binary.

Consider the code:

```asm
;test.asm

db 0x46
db 0x41
db 0x42
```

assembled with
```bash
nasm test.asm -f bin -o test.bin
```

Then checked with
```bash
> xxd test.bin
# 00000000: 4641 42                                  FAB  
```

The `boot.bin` image will be
```
xxd boot.bin
# 00000000: ebfe 0000 <...> 0000 55aa
```

Where `eb` is the `jmp` instruction machine code.[reference](https://c9x.me/x86/html/file_module_x86_id_147.html)

Running bootloader on qemu
```bash
qemu-system-i386 -hda boot.bin
```

The command above is likely to return the warning saying that automatically assuming raw format is not safe, but if you want to do so you need to be explicity to get rid of the warning.
The way of doing that then is:

```bash
qemu-system-i386 -drive file=boot.bin,format=raw
```

Other references that seems useful but unused in the reference link for this tutorial:
- http://www.baldwin.cx/386htm/toc.htm
- https://www.plantation-productions.com/Webster/

# Babysteps - 02
https://wiki.osdev.org/Babystep2

From the link above:
```
 - Boot sector loaded by BIOS is 512 bytes
 - The code in the boot sector of the disk is loaded by the BIOS at 0000:7c00
 - Machine starts in Real Mode
 - Be aware that the CPU is being interrupted unless you issue the CLI assembly command 
```

Note on **REAL MODE** vs **PROTECTED MODE** (generated by chatgpt):

- **Real Mode** and **Protected Mode** are two operating modes in x86 processors.
- **Real Mode** is the initial mode and provides a simple interface, **1 MB memory addressing**, **no memory protection**, and **uses segmented memory**.
- **Real Mode** is used in early stages of boot and older OS such as DOS.
- **Protected Mode** is an advanced mode with **memory protection**, **multitasking**, **virtual memory**, **larger address space (up to 4 GB)**, and uses a **flat memory model**.
- **Protected Mode** enhances stability, security, and efficiency in OS development.
- **Protected Mode** is used in modern OS such as Linux, Windows and Mac.


For properly using interruptions through `int` code, the BIOS expects the DS (data segment?) to be filled with a Real Mode segment value. And this is why many BIOS interrupts will not work in protected mode. So if you want to use `int 10h/ah=0eh` to print to the screen, then you need to ensure that the segment:offset for the characters to print is correct.

A list of available interrupts `INT 10H` for i386: https://en.wikipedia.org/wiki/INT_10H
